{% set useJquery = false %}
{% extends 'base.njk'%}

{% block body %}

<div class="container-fluid admin-content">
  <div class="row">
    <div class="col-12 col-xl-8">
      <a href="{{ 'changelist' | adminUrl(section, metadata) }}">Back</a>
      <h1>{{ entity | displayName(metadata) }}</h1>
      <form method="POST" action="{{ 'change' | adminUrl(section, metadata, entity) }}" class="entity-form entity-form--change">
        {% asyncEach column in metadata.columns %}
          {% set value=column.getEntityValue(entity) %}
          <fieldset class="entity-form__field {{ column.propertyName }}">
            {% if not column.isGenerated %}
              {% include getWidgetTemplate(column) %}
            {% else %}
              {% include "widgets/plaintext.njk" %}
            {% endif %}
          </fieldset>
        {% endeach %}
        {% asyncEach relation in metadata.manyToManyRelations %}
          <fieldset>
            {% include 'widgets/manytomany.njk' %}
          </fieldset>
        {% endeach %}
        <button type="submit" class="btn btn-primary float-right">Submit</button>
      </form>
      <form method="POST" action="{{ 'delete' | adminUrl(section, metadata, entity) }}">
        <input type="submit" value="Delete" class="btn btn-secondary float-left">
      </form>
    </div>
  </div>
</div>

{% endblock %}
